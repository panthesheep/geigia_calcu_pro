<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Viabilidad Productiva - Invernaderos</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        .metric-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 0.75rem;
            padding: 1.5rem;
            color: white;
            transition: transform 0.3s ease;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .input-field {
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.75rem;
            width: 100%;
            transition: all 0.3s ease;
        }
        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        .custom-inputs {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .custom-inputs.active {
            display: grid;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-white mb-3">üå± Calculadora de Viabilidad Productiva</h1>
            <p class="text-lg text-white opacity-90">Proyecta la producci√≥n anual de tu invernadero con un par de clicks</p>
        </div>

        <!-- Main Container -->
        <div class="glass-effect p-6 md:p-8 mb-6">
            <!-- Input Section -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- Area Input -->
                <div>
                    <label for="area" class="block text-gray-700 font-semibold mb-2 text-lg">
                        üìè √Årea del Proyecto (m¬≤)
                    </label>
                    <input 
                        type="number" 
                        id="area" 
                        class="input-field text-lg"
                        placeholder="Ingresa los metros cuadrados"
                        min="0.01"
                        step="0.01"
                        value="100"
                    >
                    <p class="text-sm text-gray-500 mt-2">Ingresa el √°rea disponible para tu proyecto</p>
                </div>

                <!-- Production Type Select -->
                <div>
                    <label for="production-type" class="block text-gray-700 font-semibold mb-2 text-lg">
                        üåæ Tipo de Producci√≥n
                    </label>
                    <select id="production-type" class="input-field text-lg">
                        <option value="">Selecciona un tipo de producci√≥n</option>
                        <option value="tomate">Tomate (invernadero)</option>
                        <option value="lechuga">Lechuga/Verduras de hoja</option>
                        <option value="fresas">Fresas</option>
                        <option value="pimientos">Pimientos</option>
                        <option value="pepino">Pepino</option>
                        <option value="hierbas">Hierbas arom√°ticas</option>
                        <option value="tilapia">Tilapia/Peces (acuicultura)</option>
                        <option value="camarones">Camarones (acuicultura)</option>
                        <option value="hongos">Hongos/Setas</option>
                        <option value="personalizado">‚ú® Personalizado</option>
                    </select>
                    <p class="text-sm text-gray-500 mt-2">Elige el tipo de cultivo o sistema acu√≠cola</p>
                </div>
            </div>

            <!-- Custom Inputs Section -->
            <div id="custom-inputs" class="custom-inputs grid md:grid-cols-3 gap-4 mb-8 p-4 bg-purple-50 rounded-lg">
                <div>
                    <label for="custom-density" class="block text-gray-700 font-semibold mb-2">
                        Plantas/Unidades por m¬≤
                    </label>
                    <input 
                        type="number" 
                        id="custom-density" 
                        class="input-field"
                        placeholder="Ej: 2.5"
                        min="0.01"
                        step="0.01"
                    >
                </div>
                <div>
                    <label for="custom-yield" class="block text-gray-700 font-semibold mb-2">
                        Rendimiento (kg/m¬≤)
                    </label>
                    <input 
                        type="number" 
                        id="custom-yield" 
                        class="input-field"
                        placeholder="Ej: 15"
                        min="0.01"
                        step="0.01"
                    >
                </div>
                <div>
                    <label for="custom-cycle" class="block text-gray-700 font-semibold mb-2">
                        Duraci√≥n del Ciclo (d√≠as)
                    </label>
                    <input 
                        type="number" 
                        id="custom-cycle" 
                        class="input-field"
                        placeholder="Ej: 90"
                        min="1"
                        step="1"
                    >
                </div>
            </div>

            <!-- Results Section -->
            <div id="results" style="display: none;">
                <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">üìä Resultados del An√°lisis</h2>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Metric 1 -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Total de Plantas/Unidades</div>
                        <div class="text-3xl font-bold mb-1" id="total-plants">-</div>
                        <div class="text-xs opacity-75">En toda el √°rea del proyecto</div>
                    </div>

                    <!-- Metric 2 -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Densidad de Siembra</div>
                        <div class="text-3xl font-bold mb-1" id="density">-</div>
                        <div class="text-xs opacity-75">Plantas o unidades por m¬≤</div>
                    </div>

                    <!-- Metric 3 -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Duraci√≥n del Ciclo</div>
                        <div class="text-3xl font-bold mb-1" id="cycle-duration">-</div>
                        <div class="text-xs opacity-75">D√≠as por ciclo productivo</div>
                    </div>

                    <!-- Metric 4 -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Producci√≥n Primer Ciclo</div>
                        <div class="text-3xl font-bold mb-1" id="first-cycle">-</div>
                        <div class="text-xs opacity-75">Kilogramos en el primer ciclo</div>
                    </div>

                    <!-- Metric 5 -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Producci√≥n Anual Estimada</div>
                        <div class="text-3xl font-bold mb-1" id="annual-production">-</div>
                        <div class="text-xs opacity-75">Kilogramos al final del a√±o</div>
                    </div>

                    <!-- Additional Info -->
                    <div class="metric-card">
                        <div class="text-sm opacity-90 mb-2">Ciclos por A√±o</div>
                        <div class="text-3xl font-bold mb-1" id="cycles-per-year">-</div>
                        <div class="text-xs opacity-75">N√∫mero de cosechas anuales</div>
                    </div>
                </div>
            </div>

            <!-- Warning Message -->
            <div id="warning" class="mt-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded" style="display: none;">
                <p class="font-semibold">‚ö†Ô∏è Atenci√≥n</p>
                <p class="text-sm" id="warning-message"></p>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="glass-effect p-4 text-center text-gray-600 text-sm">
            <p>üí° <strong>Nota:</strong> Los valores presentados son estimaciones basadas en condiciones √≥ptimas de cultivo. Los resultados reales pueden variar seg√∫n clima, manejo y tecnolog√≠a aplicada.</p>
        </div>
    </div>

    <script>
        // Production data - Ajustado para producci√≥n en el tr√≥pico
        const productionData = {
            tomate: {
                name: 'Tomate',
                density: 2.5,
                yield: 8,  // Reducido de 15 a 8 kg/m¬≤/ciclo
                cycleDays: 120  // Aumentado de 90 a 120 d√≠as
            },
            lechuga: {
                name: 'Lechuga/Verduras de hoja',
                density: 16,
                yield: 2,  // Reducido de 3.5 a 2 kg/m¬≤/ciclo
                cycleDays: 50  // Aumentado de 45 a 50 d√≠as
            },
            fresas: {
                name: 'Fresas',
                density: 8,
                yield: 3,  // Reducido de 6 a 3 kg/m¬≤/ciclo
                cycleDays: 150  // Aumentado de 120 a 150 d√≠as
            },
            pimientos: {
                name: 'Pimientos',
                density: 3,
                yield: 5,  // Reducido de 12 a 5 kg/m¬≤/ciclo (10 kg/m¬≤/a√±o con 2 ciclos)
                cycleDays: 140  // Aumentado de 100 a 140 d√≠as
            },
            pepino: {
                name: 'Pepino',
                density: 2,
                yield: 10,  // Reducido de 18 a 10 kg/m¬≤/ciclo
                cycleDays: 90  // Aumentado de 75 a 90 d√≠as
            },
            hierbas: {
                name: 'Hierbas arom√°ticas',
                density: 20,
                yield: 1.5,  // Reducido de 2 a 1.5 kg/m¬≤/ciclo
                cycleDays: 70  // Aumentado de 60 a 70 d√≠as
            },
            tilapia: {
                name: 'Tilapia/Peces',
                density: 30,  // Reducido de 50 a 30 peces/m¬≤
                yield: 15,  // Reducido de 25 a 15 kg/m¬≤/ciclo
                cycleDays: 180  // Mantiene 180 d√≠as
            },
            camarones: {
                name: 'Camarones',
                density: 60,  // Reducido de 100 a 60 unidades/m¬≤
                yield: 4,  // Reducido de 8 a 4 kg/m¬≤/ciclo
                cycleDays: 140  // Aumentado de 120 a 140 d√≠as
            },
            hongos: {
                name: 'Hongos/Setas',
                density: 8,  // Reducido de 10 a 8 bolsas/m¬≤
                yield: 12,  // Reducido de 20 a 12 kg/m¬≤/ciclo
                cycleDays: 60  // Aumentado de 45 a 60 d√≠as
            }
        };

        // DOM Elements
        const areaInput = document.getElementById('area');
        const productionTypeSelect = document.getElementById('production-type');
        const customInputsDiv = document.getElementById('custom-inputs');
        const customDensity = document.getElementById('custom-density');
        const customYield = document.getElementById('custom-yield');
        const customCycle = document.getElementById('custom-cycle');
        const resultsDiv = document.getElementById('results');
        const warningDiv = document.getElementById('warning');
        const warningMessage = document.getElementById('warning-message');

        // Result elements
        const totalPlantsEl = document.getElementById('total-plants');
        const densityEl = document.getElementById('density');
        const cycleDurationEl = document.getElementById('cycle-duration');
        const firstCycleEl = document.getElementById('first-cycle');
        const annualProductionEl = document.getElementById('annual-production');
        const cyclesPerYearEl = document.getElementById('cycles-per-year');

        // Event listeners
        areaInput.addEventListener('input', calculate);
        productionTypeSelect.addEventListener('change', handleProductionChange);
        customDensity.addEventListener('input', calculate);
        customYield.addEventListener('input', calculate);
        customCycle.addEventListener('input', calculate);

        function handleProductionChange() {
            const selectedType = productionTypeSelect.value;
            
            if (selectedType === 'personalizado') {
                customInputsDiv.classList.add('active');
            } else {
                customInputsDiv.classList.remove('active');
            }
            
            calculate();
        }

        function calculate() {
            // Clear warning
            warningDiv.style.display = 'none';
            
            // Get area
            const area = parseFloat(areaInput.value);
            const selectedType = productionTypeSelect.value;
            
            // Validation
            if (!area || area <= 0) {
                warningDiv.style.display = 'block';
                warningMessage.textContent = 'Por favor, ingresa un √°rea v√°lida mayor a 0 m¬≤.';
                resultsDiv.style.display = 'none';
                return;
            }
            
            if (!selectedType) {
                warningDiv.style.display = 'block';
                warningMessage.textContent = 'Por favor, selecciona un tipo de producci√≥n.';
                resultsDiv.style.display = 'none';
                return;
            }
            
            let density, yieldPerM2, cycleDays;
            
            // Get production data
            if (selectedType === 'personalizado') {
                density = parseFloat(customDensity.value);
                yieldPerM2 = parseFloat(customYield.value);
                cycleDays = parseFloat(customCycle.value);
                
                if (!density || !yieldPerM2 || !cycleDays || density <= 0 || yieldPerM2 <= 0 || cycleDays <= 0) {
                    warningDiv.style.display = 'block';
                    warningMessage.textContent = 'Por favor, completa todos los campos personalizados con valores v√°lidos mayores a 0.';
                    resultsDiv.style.display = 'none';
                    return;
                }
            } else {
                const data = productionData[selectedType];
                density = data.density;
                yieldPerM2 = data.yield;
                cycleDays = data.cycleDays;
            }
            
            // Calculations
            const totalPlants = density * area;
            const firstCycleProduction = yieldPerM2 * area;
            const cyclesPerYear = Math.floor(365 / cycleDays);
            const annualProduction = firstCycleProduction * cyclesPerYear;
            
            // Display results
            totalPlantsEl.textContent = totalPlants.toLocaleString('es-ES', { maximumFractionDigits: 0 });
            densityEl.textContent = density.toLocaleString('es-ES', { maximumFractionDigits: 2 });
            cycleDurationEl.textContent = cycleDays + ' d√≠as';
            firstCycleEl.textContent = firstCycleProduction.toLocaleString('es-ES', { maximumFractionDigits: 1 }) + ' kg';
            annualProductionEl.textContent = annualProduction.toLocaleString('es-ES', { maximumFractionDigits: 1 }) + ' kg';
            cyclesPerYearEl.textContent = cyclesPerYear;
            
            resultsDiv.style.display = 'block';
        }

        // Initial calculation with default values
        calculate();
    </script>
</body>
</html>